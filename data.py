import socket
import threading

class ThreadedServer(object):
    def __init__(self, host, port):
        self.host = host
        self.port = port
        self.sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        self.sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
        self.sock.bind((self.host, self.port))

    def listen(self):
        self.sock.listen(5)
        while True:
            print("Server listening on port", self.port)
            client, address = self.sock.accept()
            print('Connected by', address)
            client.settimeout(60)
            threading.Thread(target = self.listenToClient,args = (client,address)).start()

    def listenToClient(self, client, address):
        size = 1024
        while True:
            try:
                data = client.recv(size)
                if data:
                    # Set the response to echo back the recieved data 
                    print('Received', repr(data))#response = data
                    z = input('to Client: ')
                    client.sendall(bytes(z, encoding='utf8'))#client.send(response)
                else:
                    raise error('Client disconnected')
            except:
                client.close()
                return False

if __name__ == "__main__":
    ThreadedServer('127.0.0.1', 65432).listen()
##    ThreadedServer('',port_num).listen()

##bong88Data
##["b708",
## [
##     [0,"o",1,380820930,2,48086171,6,8,13,8,5,"running",10,0,18,4.5,20,0,11,0,19,0,25,0.18,7,616,12,3,14,0,9,0,8,1,15,0,17,0,16,0,3,0.9,4,0.92,26,0,29,0,27,0,28,0,22,1,21,1,23,3,24,2],
##     [0,"m",53,0,2,48086580,57,"0",46,0,48,0,62,false,92,false,89,false,50,0,85,3,88,true,90,false,80,1637784000,78,true,93,false,101,false,83,4,148,204,84,false,103,false,117,0,67,0,49,"",35,46030,55,"T",56,"1065A00",58,1637783940,60,"running",54,"<font color=red>LIVE</font> 04:00AM",79,1637784000,82,0,59,618591,69,"舒列夫 (角球數)",70,"舒列夫 (角球数)",68,"Sheriff Tiraspol No.of Corners",77,"",73,"",74,"เชอร์ริฟ ติราสโพล จำนวนลูกเตะมุม",114,"",116,"",71,"舒列夫 (角球数)",128,"",112,"Sheriff Tiraspol Tổng Số Phạt Góc",63,475004,94,"皇家馬德里 (角球數)",95,"皇家马德里 (角球数)",91,"Real Madrid  No.of Corners",110,"",104,"",102,"เรอัล มาดริด จำนวนลูกเตะมุม",113,"",115,"",96,"皇家马德里 (角球数)",127,"",111,"Real Madrid  Tổng Số Phạt Góc",37,1,52,0,40,1637740740,44,0,97,0,66,0,76,0,75,0,65,0,81,0,98,true,99,0,100,3,61,0,149,47663631,108,89,106,0,107,2,109,0,105,0,86,0,87,false,72,0,64,1,39,44,42,21,41,21,51,3,43,40,45,17,47,17,119,0,118,0],
##     [2,48086580,122,"71",120,11,123,false,0,"st",121,2],
##     [0,"o",1,380822552,2,48086580,6,1,13,1,5,"running",10,0,18,0,20,4,11,0,19,0,25,0.16,7,616,12,3,14,1,9,0,8,1,15,0,17,0,16,0,3,-0.94,4,0.78,26,0,29,0,27,0,28,0,22,1,21,1,23,3,24,2],
##     [0,"o",1,380822541,2,48086580,6,3,13,3,5,"running",10,0,18,10.5,20,0,11,0,19,0,25,0.18,7,662,12,3,14,1,9,0,8,1,15,0,17,0,16,0,3,-0.99,4,0.81,26,0,29,0,27,0,28,0,22,1,21,1,23,3,24,2],
##     [0,"o",1,380822514,2,48086580,6,7,13,7,5,"suspend",10,0,18,0,20,2,11,0,19,0,25,0.16,7,616,12,3,14,1,9,0,8,1,15,0,17,0,16,0,3,-0.95,4,0.79,26,0,29,0,27,0,28,0,22,1,21,1,23,3,24,2],
##     [0,"o",1,380822510,2,48086580,6,8,13,8,5,"running",10,0,18,5,20,0,11,0,19,0,25,0.18,7,616,12,3,14,0,9,0,8,1,15,0,17,0,16,0,3,-0.98,4,0.8,26,0,29,0,27,0,28,0,22,1,21,1,23,3,24,2],
##     [0,"m",53,0,2,48086578,57,"0",46,0,48,0,62,false,92,false,89,false,50,0,85,3,88,true,90,false,80,1637784000,78,true,93,false,101,false,83,4,148,204,84,false,103,false,117,0,67,0,49,"",35,46030,55,"T",56,"1066A00",58,1637783940,60,"running",54,"<font color=red>LIVE</font> 04:00AM",79,1637784000,82,0,59,470197,69,"士砵亭 (角球數)",70,"士砵亭 (角球数)",68,"Sporting Lisbon No.of Corners",77,"",73,"",74,"สปอร์ติ้ง ลิสบอน จำนวนลูกเตะมุม",114,"",116,"",71,"里斯本竞技 (角球数)",128,"",112,"Sporting Lisbon Tổng Số Phạt Góc",63,479911,94,"多蒙特 (角球數)",95,"多特蒙德 (角球数)",91,"Borussia Dortmund No.of Corners",110,"",104,"",102,"โบรุสเซีย ดอร์ทมุนด์ จำนวนลูกเตะมุม",113,"",115,"",96,"多特蒙德 (角球数)",127,"",111,"Borussia Dortmund Tổng Số Phạt Góc",37,1,52,0,40,1637740740,44,0,97,0,66,0,76,0,75,0,65,0,81,0,98,true,99,0,100,3,61,0,149,47663632,108,89,106,0,107,2,109,0,105,0,86,0,87,false,72,0,64,1,39,46,42,21,41,21,51,3,43,40,45,17,47,17,119,0,118,0],
##     [2,48086578,122,"68",120,11,123,false,0,"st",121,2],
##     [0,"o",1,380822544,2,48086578,6,1,13,1,5,"running",10,0,18,0.5,20,0,11,0,19,0,25,0.16,7,616,12,3,14,1,9,0,8,1,15,0,17,0,16,0,3,0.85,4,0.99,26,0,29,0,27,0,28,0,22,1,21,1,23,3,24,2],
##     [0,"o",1,380822535,2,48086578,6,3,13,3,5,"running",10,0,18,9.5,20,0,11,0,19,0,25,0.18,7,662,12,3,14,1,9,0,8,1,15,0,17,0,16,0,3,-0.98,4,0.8,26,0,29,0,27,0,28,0,22,1,21,1,23,3,24,2],
##     [0,"o",1,380822526,2,48086578,6,5,13,5,5,"running",10,0,11,0,7,518,12,3,14,1,9,0,8,1,15,0,17,0,16,0,31,1.85,32,5.9,30,2.43,3,0.85,4,0.99,33,0.5,36,0.16,34,0,38,0],
##     [0,"o",1,380822505,2,48086578,6,7,13,7,5,"running",10,0,18,0.25,20,0,11,0,19,0,25,0.16,7,616,12,3,14,1,9,0,8,1,15,0,17,0,16,0,3,0.88,4,0.96,26,0,29,0,27,0,28,0,22,1,21,1,23,3,24,2],
##     [0,"o",1,380822499,2,48086578,6,8,13,8,5,"running",10,0,18,4.5,20,0,11,0,19,0,25,0.18,7,616,12,3,14,0,9,0,8,1,15,0,17,0,16,0,3,0.97,4,0.85,26,0,29,0,27,0,28,0,22,1,21,1,23,3,24,2],
##     [0,"m",53,0,2,48086170,52,0,40,1637740740,57,"0",44,0,76,0,75,0,65,0,86,0,87,false,62,false,92,false,89,false,50,0,85,3,88,true,90,false,78,true,93,false,101,false,83,4,117,0,67,0,46,0,48,0,80,1637784000,148,204,84,false,103,false,49,"",35,46030,55,"T",56,"1067A00",58,1637783940,60,"running",54,"<font color=red>LIVE</font> 04:00AM",79,1637784000,82,0,59,482600,69,"布魯日 (角球數)",70,"布鲁日 (角球数)",68,"Club Brugge No.of Corners",77,"",73,"",74,"คลับบรูซ จำนวนลูกเตะมุม",114,"",116,"",71,"布鲁日 (角球数)",128,"",112,"Club Brugge Tổng Số Phạt Góc",63,479877,94,"RB萊比錫 (角球數)",95,"RB莱比锡 (角球数)",91,"RB Leipzig No.of Corners",110,"",104,"",102,"RB ลีบซิก จำนวนลูกเตะมุม",113,"",115,"",96,"RB莱比锡 (角球数)",127,"",111,"RB Leipzig Tổng Số Phạt Góc",37,1,97,0,66,0,81,0,98,true,99,0,100,3,61,0,149,47663634,108,89,106,0,107,2,109,0,105,0,72,0,64,1,39,46,42,21,41,21,51,3,43,40,45,17,47,17,119,0,118,0],
##     [2,48086170,122,"75",120,11,123,false,0,"st",121,2],
##     [0,"o",1,380820679,2,48086170,6,1,13,1,5,"running",10,0,18,0,20,0.25,11,0,19,0,25,0.16,7,616,12,3,14,1,9,0,8,1,15,0,17,0,16,0,3,0.91,4,0.93,26,0,29,0,27,0,28,0,22,1,21,1,23,3,24,2],
##     [0,"o",1,380820674,2,48086170,6,3,13,3,5,"running",10,0,18,9.5,20,0,11,0,19,0,25,0.18,7,662,12,3,14,1,9,0,8,1,15,0,17,0,16,0,3,0.83,4,0.99,26,0,29,0,27,0,28,0,22,1,21,1,23,3,24,2],
##     [0,"o",1,380820668,2,48086170,6,5,13,5,5,"running",10,0,11,0,7,518,12,3,14,1,9,0,8,1,15,0,17,0,16,0,31,2.27,32,6,30,1.94,3,0,4,0,33,0,36,0,34,0,38,0],
##     [0,"o",1,380820658,2,48086170,6,7,13,7,5,"running",10,0,18,0,20,0.25,11,0,19,0,25,0.16,7,616,12,3,14,1,9,0,8,1,15,0,17,0,16,0,3,0.86,4,0.98,26,0,29,0,27,0,28,0,22,1,21,1,23,3,24,2],
##     [0,"o",1,380820657,2,48086170,6,8,13,8,5,"running",10,0,18,4.5,20,0,11,0,19,0,25,0.18,7,616,12,3,14,0,9,0,8,1,15,0,17,0,16,0,3,0.97,4,0.85,26,0,29,0,27,0,28,0,22,1,21,1,23,3,24,2],
##     [0,"m",53,0,2,48191688,52,0,40,1637732640,57,"0",44,0,76,0,75,0,65,0,86,0,87,false,62,false,92,false,89,false,50,0,85,2,88,true,90,false,78,false,93,false,101,false,83,2,117,0,67,0,46,0,48,0,80,1637775900,148,205,84,false,103,false,49,"",35,46265,55,"T",56,"1080",58,1637775840,60,"running",54,"11/25 01:45AM",79,1637775900,82,0,59,302902,69,"主場罰牌 - 星期三",70,"主场罚牌 - 星期三",68,"Home Team Total Bookings - Wednesday",77,"",73,"홈 팀 Total Bookings - 수요일",74,"ทีมเหย้า จำนวนใบเหลือง-แดง - วันพุธ",114,"",116,"",71,"主场罚牌 - 星期三",128,"",112,"Đội Nhà Tổng Số Thẻ Phạt - Thứ Tư",63,302903,94,"客場罰牌 - 星期三",95,"客场罚牌 - 星期三",91,"Away Team Total Bookings - Wednesday",110,"",104,"원정 팀 Total Bookings - 수요일",102,"ทีมเยือน จำนวนใบเหลือง-แดง - วันพุธ",113,"",115,"",96,"客场罚牌 - 星期三",127,"",111,"Đội Khách Tổng Số Thẻ Phạt - Thứ Tư",37,1,97,0,66,0,81,0,98,true,99,0,100,4,61,0,108,89,106,0,107,2,109,0,105,0,72,0,64,1,39,4,42,0,41,0,51,0,43,0,45,0,47,0,119,0,118,0],
##     [0,"o",1,381687085,2,48191688,6,1,13,1,5,"running",10,0,18,0,20,0.75,11,0,19,0,25,0.16,7,616,12,3,14,1,9,0,8,1,15,0,17,0,16,0,3,-0.96,4,0.8,26,0,29,0,27,0,28,0],
##     [0,"o",1,381687077,2,48191688,6,3,13,3,5,"running",10,0,18,36.5,20,0,11,0,19,0,25,0.18,7,616,12,3,14,1,9,0,8,1,15,0,17,0,16,0,3,0.9,4,0.92,26,0,29,0,27,0,28,0],
##     [0,"o",1,381687070,2,48191688,6,7,13,7,5,"running",10,0,18,0,20,0.25,11,0,19,0,25,0.16,7,616,12,3,14,1,9,0,8,1,15,0,17,0,16,0,3,0.87,4,0.97,26,0,29,0,27,0,28,0],
##     [0,"o",1,381687067,2,48191688,6,8,13,8,5,"running",10,0,18,11.5,20,0,11,0,19,0,25,0.18,7,616,12,3,14,0,9,0,8,1,15,0,17,0,16,0,3,0.89,4,0.93,26,0,29,0,27,0,28,0],
##     [0,"m",53,0,2,48086866,57,"0",46,0,48,0,62,false,92,false,89,false,50,0,85,3,88,true,90,false,80,1637775900,78,false,93,false,101,false,83,4,148,205,84,false,103,false,117,0,67,0,49,"",35,46265,55,"T",56,"1080A00",58,1637775840,60,"running",54,"11/25 01:45AM",79,1637775900,82,0,59,685873,69,"國際米蘭罰牌",70,"国际米兰罚牌",68,"Inter Milan Total Bookings",77,"",73,"",74,"อินเตอร์ มิลาน จำนวนใบเหลือง-แดง",114,"",116,"",71,"国际米兰罚牌",128,"",112,"Inter Milan Tổng Số Thẻ Phạt",63,696882,94,"薩克達罰牌",95,"萨克达罚牌",91,"Shakhtar Donetsk Total Bookings",110,"",104,"",102,"ชักตาร์ โดเน็ตส์ก จำนวนใบเหลือง-แดง",113,"",115,"",96,"顿涅茨克矿工罚牌",127,"",111,"",37,1,52,0,40,1637732640,44,0,97,0,66,0,76,0,75,0,65,0,81,0,98,true,99,0,100,4,61,0,149,47663630,108,89,106,0,107,2,109,0,105,0,86,0,87,false,72,0,64,1,39,8,42,0,41,0,51,0,43,2,45,0,47,0,119,0,118,0],
##     [2,48086866,122,"72",120,11,123,false,0,"st",121,2],
####################################################################################################################################################################################################################     
##seatimedata
##[
##    [1,'a309261f86314618','r',1,0,'eng','0',0],
##    [],
##    [
##        [
##            [22136,'China League 1',''],
##            [
##                [6619487 ,0 ,'China League 1' ,'22136' ,0,'0 - 2' ,0,1,0,0,'14:30' ,2,35,0,186124,104513,1,1,-4.5,0.25,0,'Sichuan Jiuniu (n)' ,0,'Nantong Zhiyun' ,0,0,0,1,0,0,0,0,4.5,-6.4,'S' ,'S' ,0,1,2.5,-6.6,4.7,-4.7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,838115527,'2021-12-04 14:30:00' ,82,8699800,0,'2021-12-04' ,0,'22136|186124|104513' ,1,0,0,0,0,0,0,0],
##                [6619488 ,0 ,'China League 1' ,'22136' ,0,'0 - 2' ,0,1,0,0,'14:30' ,2,35,0,186124,104513,1,1,-2.5,0,1,'Sichuan Jiuniu (n)' ,0,'Nantong Zhiyun' ,0,0,0,0,0,0,0,0,-4.4,2.5,'S' ,'S' ,0,1,2.75,-4.2,2.3,-2.3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,'2021-12-04 14:30:00' ,82,8699800,0,'2021-12-04' ,6619487,'22136|186124|104513' ,0,0,0,0,0,0,0,0],
##                [6619590 ,0 ,'China League 1' ,'22136' ,0,'1 - 0' ,0,1,0,0,'15:00' ,2,6,0,197882,152036,1,0,0,-1,1,'Nanjing City (n)' ,0,'Zibo Cuju' ,0,0,0,1,0,0,0,0,0,0,'S' ,'S' ,0,1,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,298872427,'2021-12-04 15:00:00' ,83,8699805,0,'2021-12-04' ,6619488,'22136|197882|152036' ,1,0,0,0,0,0,0,0]
##                ]
##            ],
##        [
##            [30094,'Israel National League South U19',''],
##            [
##                [6619483 ,0 ,'Israel National League South U19' ,'30094' ,0,'1 - 2' ,0,1,0,0,'14:30' ,2,32,0,112809,105993,1,1,-7,0.25,1,'Maccabi Herzliya U19' ,0,'Hapoel Ashkelon U19' ,0,0,0,1,10,1.37999999523163,3.04999995231628,0,-9.3,7,'S' ,'S' ,0,1,3.5,8.8,8.9,-8.9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,'2021-12-04 14:30:00' ,0,8424257,0,'2021-12-04' ,6619590,'30094|112809|105993' ,1,0,0,0,0,0,0,0],
##                [6619579 ,0 ,'Israel National League South U19' ,'30094' ,0,'1 - 2' ,0,1,0,0,'14:30' ,2,32,0,112809,105993,1,1,5.9,0,1,'Maccabi Herzliya U19' ,0,'Hapoel Ashkelon U19' ,0,0,0,0,0,0,0,0,3.6,-5.9,'S' ,'S' ,0,1,3.75,-8.8,6.5,-6.5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,'2021-12-04 14:30:00' ,0,8424257,0,'2021-12-04' ,6619483,'30094|112809|105993' ,0,0,0,0,0,0,0,0]
##                ]
##            ],
##        [
##            [26935,'Hong Kong Sapling Cup',''],
##            [
##                [6619361 ,0 ,'Hong Kong Sapling Cup' ,'26935' ,0,'1 - 1' ,0,1,0,0,'15:00' ,2,6,0,104462,40292,1,1,-7.3,1.25,1,'Eastern Long Lions' ,0,'Hong Kong FC' ,0,0,0,1,1.3400000333786,11,3.20000004768372,0,-9.6,7.3,'S' ,'S' ,0,1,3.75,-9.7,7.4,-7.4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,626827127,'2021-12-04 15:00:00' ,0,1556204,0,'2021-12-04' ,6619579,'26935|104462|40292' ,1,0,0,0,0,0,0,0],
##                [6619611 ,0 ,'Hong Kong Sapling Cup' ,'26935' ,0,'1 - 1' ,0,1,0,0,'15:00' ,2,6,0,104462,40292,1,1,9.4,1,1,'Eastern Long Lions' ,0,'Hong Kong FC' ,0,0,0,0,0,0,0,0,7.1,-9.4,'S' ,'S' ,0,1,3.5,7.5,-9.8,9.8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,'2021-12-04 15:00:00' ,0,1556204,0,'2021-12-04' ,6619361,'26935|104462|40292' ,0,0,0,0,0,0,0,0]
##                ]
##            ]
##        ],
##    [],
##    []
##    ]
